<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details | Apple Store</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Specific Styles for Product Detail Page */
        
        /* Desktop: Side by Side */
        .product-detail-wrapper {
            display: flex;
            gap: 60px;
            align-items: center;
            justify-content: center;
            animation: fadeUp 0.8s ease-out;
        }

        .detail-image {
            flex: 1;
            text-align: center;
        }

        .detail-image img {
            max-width: 100%;
            max-height: 500px;
            object-fit: contain;
            filter: drop-shadow(0 20px 40px rgba(0,0,0,0.15));
        }

        .detail-info {
            flex: 1;
            text-align: left;
        }

        .detail-title {
            font-size: 48px;
            font-weight: 600;
            margin-bottom: 10px;
            line-height: 1.1;
        }

        .detail-price {
            font-size: 32px;
            font-weight: 500;
            color: #1d1d1f;
            margin-bottom: 30px;
        }

        .badge {
            display: inline-block;
            background: #f5f5f7;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            margin-bottom: 20px;
        }

        .features-list {
            list-style: none;
            margin-bottom: 40px;
        }

        .features-list li {
            margin-bottom: 15px;
            font-size: 17px;
            color: #484848;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            main {
                padding-top: 80px !important;
                display: block !important; /* Remove flex centering for mobile vertical flow */
            }

            #detail-container {
                padding: 0 20px !important; /* Reduce padding for more screen space */
            }

            .product-detail-wrapper {
                flex-direction: column; /* Stack vertically */
                gap: 30px;
                text-align: center;
            }

            .detail-info {
                text-align: left; /* Keep text left-aligned for readability */
                width: 100%;
            }

            .detail-image img {
                max-height: 300px; /* Smaller image on mobile */
            }

            .detail-title {
                font-size: 32px; /* Smaller title */
            }

            .detail-price {
                font-size: 24px;
            }
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <a href="index.html" class="logo">
                <i class="fab fa-apple"></i> Store
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="orders.html">My Orders</a>
                <a href="tracking.html">Track Order</a>
                <a href="cart.html" class="cart-icon">
                    <i class="fas fa-shopping-bag"></i>
                    <span id="cart-count">0</span>
                </a>
            </div>
        </nav>
    </header>

    <main style="padding-top: 100px; min-height: 90vh; display: flex; align-items: center; justify-content: center;">
        <div id="detail-container" style="max-width: 1100px; width: 100%; padding: 0 40px;">
            <div style="text-align: center; padding: 100px;">
                <i class="fas fa-spinner fa-spin fa-3x" style="color: #86868b;"></i>
            </div>
        </div>
    </main>

    <footer>
        <div style="max-width: 980px; margin: 0 auto; text-align: center;">
            <p style="margin-bottom: 10px; color: #86868b; font-size: 12px;">Prices are inclusive of VAT and other statutory levies.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Internal script to handle product display logic
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Get Product ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = parseInt(urlParams.get('id'));

            // 2. Mock Data (Ideally this comes from script.js or an API)
            // You should replace this with your actual data source if you have one in script.js
            const products = [
                { id: 1, name: "iPhone 13", price: 35000, image: "images/iphone13.png", badge: "Great Value", features: ["A15 Bionic chip", "Dual-camera system", "Super Retina XDR display"] },
                { id: 2, name: "iPhone 14", price: 45000, image: "images/iphone14.png", badge: "Best Seller", features: ["A15 Bionic chip", "Action mode", "All-day battery life"] },
                { id: 3, name: "iPhone 15", price: 65000, image: "images/iphone15.png", badge: "New Arrival", features: ["Dynamic Island", "48MP Main camera", "USB-C connector"] },
                { id: 4, name: "iPhone 15 Pro", price: 115000, image: "images/iphone15pro.png", badge: "Pro Power", features: ["Titanium design", "A17 Pro chip", "Action button"] },
                { id: 5, name: "iPhone 14 Pro", price: 85000, image: "images/iphone14pro.png", badge: "Pro Performance", features: ["Dynamic Island", "A16 Bionic", "Always-On display"] },
                { id: 6, name: "iPhone 12", price: 25000, image: "images/iphone12.png", badge: "Budget Choice", features: ["A14 Bionic", "Dual-camera system", "Ceramic Shield"] },
                { id: 7, name: "iPhone 11", price: 20000, image: "images/iphone11.png", badge: "Entry Level", features: ["Liquid Retina HD", "Dual-camera system", "Face ID"] },
                { id: 8, name: "iPhone SE", price: 15000, image: "images/iphonese.png", badge: "Classic Design", features: ["A15 Bionic", "Touch ID", "Compact size"] }
            ];

            const product = products.find(p => p.id === productId);
            const container = document.getElementById('detail-container');

            if (!product) {
                container.innerHTML = `
                    <div style="text-align: center;">
                        <h2>Product not found</h2>
                        <a href="index.html" class="btn-primary" style="margin-top: 20px; display: inline-block;">Go Back</a>
                    </div>`;
                return;
            }

            // 3. Inject HTML
            container.innerHTML = `
                <div class="product-detail-wrapper">
                    <div class="detail-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="detail-info">
                        <span class="badge">${product.badge}</span>
                        <h1 class="detail-title">${product.name}</h1>
                        <div class="detail-price">â‚¹${product.price.toLocaleString('en-IN')}</div>
                        
                        <ul class="features-list">
                            ${product.features.map(f => `<li><i class="fas fa-check-circle" style="color:#0071e3"></i> ${f}</li>`).join('')}
                            <li><i class="fas fa-shield-alt" style="color:#0071e3"></i> 1 Year Warranty</li>
                            <li><i class="fas fa-truck" style="color:#0071e3"></i> Free Delivery</li>
                        </ul>

                        <div style="display: flex; gap: 15px;">
                            <button class="btn-primary" onclick="addToCart(${product.id})">Add to Bag</button>
                        </div>
                    </div>
                </div>
            `;
        });

        // Function to handle Add to Cart
        function addToCart(id) {
            // Re-find product (simple implementation)
             const products = [
                { id: 1, name: "iPhone 13", price: 35000, image: "images/iphone13.png" },
                { id: 2, name: "iPhone 14", price: 45000, image: "images/iphone14.png" },
                { id: 3, name: "iPhone 15", price: 65000, image: "images/iphone15.png" },
                { id: 4, name: "iPhone 15 Pro", price: 115000, image: "images/iphone15pro.png" },
                { id: 5, name: "iPhone 14 Pro", price: 85000, image: "images/iphone14pro.png" },
                { id: 6, name: "iPhone 12", price: 25000, image: "images/iphone12.png" },
                { id: 7, name: "iPhone 11", price: 20000, image: "images/iphone11.png" },
                { id: 8, name: "iPhone SE", price: 15000, image: "images/iphonese.png" }
            ];
            
            const product = products.find(p => p.id === id);
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount(); // Assumes this function is in script.js
            alert('Added to bag!');
            window.location.href = 'cart.html';
        }
    </script>
</body>

</html>
